Белорусский государственный университет
Факультет прикладной математики и информатики
Кафедра технологии программирования
Доц. Побегайло А.П.

Лабораторная работа No2. ( 4 часа: 25.02.19 – 11.03.19 )

Тема: «Создание процессов».

Задача. Написать консольную программу Main и две утилиты (служебные программы)
Creator и Reporter, которые выполняют следующие действия.
Утилита Creator создает бинарный файл, имя и количество записей в котором получает через
командную строку.
Записи файла вводятся с консоли и имеют следующую структуру:
struct tax_payment
{
int num; // идентификационный номер компании
char name[10]; // название компании
double sum; // сумма налоговых платежей
};
Утилита Reporter создает текстовый файл, содержащий упорядоченный список компаний,
налоговые платежи которых выше или ниже заданного значения. Отчет формируется на основе
бинарного файла, созданного программой Creator.
1. Утилита получает через командную строку следующие данные:
1.1. Имя исходного бинарного файла.
1.2. Имя файла отчета.
1.3. Заданное значение платежей.
1.4. Символ ‘<’ или ‘>’, который означает соответственно меньше или больше
заданного значения платежей.
2. Отчет содержит следующие строки:
2.1. Заголовок: Отчет по файлу «имя исходного бинарного файла».
2.2. Строка: Список компаний, налоговые платежи которых “<” или “>” “заданное
значение”.
2.3. Список компаний по строкам. Каждая строка содержит информацию из
соответствующей записи бинарного файла.
Программа Main выполняет следующие действия:
1. Запрашивает с консоли имя бинарного файла и количество записей в этом файле.
2. Запускает утилиту Creator, которой передает через командную строку имя
создаваемого бинарного файла и количество записей в этом файле.
3. Ждет завершения работы утилиты Creator.
4. Выводит содержимое созданного бинарного файла на консоль.
5. Запрашивает с консоли:
a. Имя файла отчета.
b. Заданное значение платежей.
c. Тип отчета: признак ‘<’ или ‘>’.
6. Запускает утилиту Reporter, которой передает через командную строку:
a. Имя исходного бинарного файла.
b. Имя файла отчета.
c. Заданное значение платежей.
d. Тип отчета: признак ‘<’ или ‘>’.
7. Ждет завершения работы утилиты Reporter.
8. Выводит отчет на консоль.
9. Завершает свою работу.
Примечание. Для ожидания завершения работы процессов Creator и Reporter
использовать функцию:
DWORD WaitForSingleObject(
HANDLE hHandle, // дескриптор объекта
DWORD dwMilliseconds // интервал ожидания в миллисекундах
);
где второй параметр установить равным INFINITE, например
WaitForSingleObject(hCreator, INFINITE);
Здесь hCreator – дескриптор процесса Creator.
